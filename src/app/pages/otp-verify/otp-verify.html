<div class="verify-otp-bg">
<div class="green-container">
  <div class="header">
    <span class="logo-circle">
      <svg width="32" height="32" viewBox="0 0 32 32">
        <circle cx="16" cy="16" r="16" fill="#38b000"/>
        <path d="M9 17l5 5 9-9" stroke="#fff" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </span>
    <h2>Vérification du code</h2>
    <p>Un code de vérification a été envoyé à<br><strong>{{ email }}</strong></p>
  </div>
  <form [formGroup]="otpForm" (ngSubmit)="onVerifyOtp()" autocomplete="off" novalidate>
    <div class="otp-label">Entrez le code à 6 chiffres :</div>
    <div class="otp-code-group">
      <input *ngFor="let ctrl of otpControls; let i = index"
             type="text"
             maxlength="1"
             pattern="[0-9]*"
             inputmode="numeric"
             class="otp-digit"
             [formControlName]="ctrl"
             (keyup)="onOtpInput($event, i)"
             (paste)="onPasteOtp($event)"
             [autofocus]="i === 0"
      />
    </div>
    <button class="green-btn" type="submit" [disabled]="otpForm.invalid || loading">
      <span *ngIf="!loading">Valider</span>
      <span *ngIf="loading" class="loader"></span>
    </button>
  </form>
  <div class="error" *ngIf="errorMessage">
    <svg width="18" height="18" fill="none">
      <circle cx="9" cy="9" r="9" fill="#f44336"/>
      <path d="M9 5v4m0 2v2" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
      <circle cx="9" cy="13.25" r="1" fill="#fff"/>
    </svg>
    {{ errorMessage }}
  </div>
</div>
</div>
